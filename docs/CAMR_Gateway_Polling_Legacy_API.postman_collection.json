{
	"info": {
		"_postman_id": "legacy-gateway-polling-api",
		"name": "CAMR Gateway Polling Legacy API",
		"description": "Legacy PHP endpoint URLs for backward compatibility with deployed gateways. These endpoints maintain the exact URL structure from the old PHP system and route to the same GatewayPollingController methods as the modern API.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "CSV Meter List Updates (Legacy)",
			"item": [
				{
					"name": "1. Check CSV Update (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/get_update_csv",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"get_update_csv"
							]
						},
						"description": "Gateway checks if a new meter list CSV is available.\n\n**Response**: Plain text `1` (update available) or `0` (no update)\n\n**Legacy URL**: Maintains exact PHP endpoint structure for deployed gateways"
					},
					"response": []
				},
				{
					"name": "2. Get CSV Content (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/get_content_csv",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"get_content_csv"
							]
						},
						"description": "Download meter list CSV (first 32 active meters).\n\n**Response**: CSV format `meter_name,config_file,addressable_meter`\n\n**Example**:\n```\n030011100348,c2000_300.cfg,030011100348\n030011100350,c2000_300.cfg,030011100350\n```"
					},
					"response": []
				},
				{
					"name": "3. Reset CSV Update Flag (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/reset_update_csv",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"reset_update_csv"
							]
						},
						"description": "Gateway signals completion of CSV download. Resets `update_csv` flag to false.\n\n**Response**: Plain text `OK`"
					},
					"response": []
				}
			]
		},
		{
			"name": "Site Code Updates (Legacy)",
			"item": [
				{
					"name": "1. Check Site Code Update (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/get_update_location",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"get_update_location"
							]
						},
						"description": "Gateway checks if site code has changed.\n\n**Response**: Plain text `1` (update available) or `0` (no update)"
					},
					"response": []
				},
				{
					"name": "2. Get Site Code (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/get_content_location",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"get_content_location"
							]
						},
						"description": "Download site code for this gateway.\n\n**Response**: Plain text `location = \"SITE_CODE\"`\n\n**Example**: `location = \"SMSL\"`"
					},
					"response": []
				},
				{
					"name": "3. Reset Site Code Update Flag (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/reset_update_location",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"reset_update_location"
							]
						},
						"description": "Gateway signals completion of site code update. Resets `update_site_code` flag to false.\n\n**Response**: Plain text `OK`"
					},
					"response": []
				}
			]
		},
		{
			"name": "Force Load Profile (Legacy)",
			"item": [
				{
					"name": "1. Check Force Load Profile (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/force_lp",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"force_lp"
							]
						},
						"description": "Gateway checks if server requires immediate load profile upload.\n\n**Response**: Plain text `1` (upload required) or `0` (not required)"
					},
					"response": []
				},
				{
					"name": "2. Reset Force Load Profile Flag (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/rtu/index.php/rtu/rtu_check_update/{{gateway_mac}}/reset_force_lp",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rtu",
								"index.php",
								"rtu",
								"rtu_check_update",
								"{{gateway_mac}}",
								"reset_force_lp"
							]
						},
						"description": "Gateway signals completion of load profile upload. Resets `force_load_profile` flag to false.\n\n**Response**: Plain text `OK`"
					},
					"response": []
				}
			]
		},
		{
			"name": "Server Time Sync (Legacy)",
			"item": [
				{
					"name": "Get Server Time (Legacy)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/check_time.php",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"check_time.php"
							]
						},
						"description": "Get current server time for gateway clock synchronization.\n\n**Response**: Plain text `YYYY-MM-DD HH:MM:SS`\n\n**Example**: `2025-11-27 14:13:04`\n\n**Note**: This endpoint is at root level, not under /rtu path"
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://camr.test",
			"type": "string"
		},
		{
			"key": "gateway_mac",
			"value": "4e:b8:61:88:74:4f",
			"type": "string"
		}
	]
}
